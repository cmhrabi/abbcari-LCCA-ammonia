EI_UNIT_CONVERSION = 1000000

def EI_elec_n_calc(EI_q, EG_q_n, EG_percentage):
    output = []
    if len(EG_q_n) > 0:
        for i in range(len(EG_q_n["Solar"])):
            Ei_elec_n = 0
            EG_sum = 0
            for key in EG_q_n.keys():
                Ei_elec_n += EI_UNIT_CONVERSION*EI_q[key]*EG_q_n[key][i]
                EG_sum += EG_q_n[key][i]

            output.append(Ei_elec_n/(EG_sum*EI_UNIT_CONVERSION))
  
    return output

def main():
    # Inputs (Parameters)
    # General

    # Capex
    X_sat = 240.63
    X_b = 0.01486512
    DR = 0.07
    d = 0.01
    t_o = 2027
    t_f = 2050
    m = 5

    T_op = 8000
    T_l = 25
    eff = 0
    ER_b = [
        {
            "elec": [200, 350],
            "nat": [300, 500]
        },
        {
            "elec": [150, 200],
            "nat": [100, 150]
        }
    ]
    WR = 100
    CO2_per_ammonia = 2.013

    energy_sources_generation = {
        "Solar": [12370.85, 13034.4, 13697.95, 14361.5, 15114.34, 20577.39, 26041.93, 31473.45, 36774.9, 42161.8, 42769.28, 43247.8, 43793.05, 44301.81, 44977.33, 47716.47, 50437.67, 53163.22, 55744.82, 58235.12, 58898.59, 59782.75, 60531.67, 61214.7, 62038.55],
        "Wind": [67972.82, 73531.38, 79436.82, 85234.38, 92447.75, 111254.59, 130403.24, 148993.79, 167085.75, 184305.25, 191832.79, 199211.78, 206950.17, 214379.93, 221741.21, 239527.4, 257535.9, 274773.12, 291459.15, 307964.04, 320515.08, 332700.41, 344803.7, 356705.39, 369473.84],
        "Hydro": [411852.56, 419981.88, 426869.5, 436540.38, 443003.08, 446336.98, 450324.92, 454028.58, 457200.29, 465887.5, 467417.39, 468835.99, 470024.22, 471310.57, 472122.51, 472503.01, 473445.5, 473265.08, 472173.46, 471195.94, 471942.62, 472757.77, 473427.37, 474137.28, 476049.12],
        "Nuclear": [76028.67, 76035.12, 79075.16, 81493.8, 87624.81, 95361.02, 104341.01, 112752.32, 125787.15, 131692.29, 147402.04, 163198.29, 179349.95, 196063.58, 213669.05, 218043.73, 218762.28, 222132.71, 227949.32, 229980.73, 232644.77, 235547.83, 238732.78, 241793.21, 245278.04],
        "Biomass": [8048.59, 7787.57, 8255.76, 7537.47, 7426.04, 10268.81, 13828.84, 17871.67, 20069.95, 19716.07, 21787, 23896.4, 26017.44, 28250.48, 30431.87, 33444.33, 36403.28, 39154.23, 41693.73, 44172.44, 47241.86, 50476.86, 53760.69, 57112.79, 60527.28],
        "Natural Gas": [100957.43, 106986.59, 110925.75, 118135.1, 122842.69, 104728.89, 86058.73, 69814.97, 54848.91, 41866.65, 40455.78, 39718.96, 39341.53, 39850.28, 40610.15, 43952.12, 48449.88, 51871.98, 53636.88, 55505.42, 59854.35, 64755.29, 70146.96, 75436.35, 78276.28],
        "Heavy Fuel Oil": [1144.65, 1181.39, 1482.02, 1181.33, 914.76, 956.18, 935.94, 942.56, 967.83, 726.09, 670.94, 679.4, 673.08, 681.84, 681.76, 675.25, 851.94, 892.2, 720.63, 734.54, 760.72, 800.12, 850.97, 957.38, 872.26],
        "Coal": [8183.05, 7418.06, 6253.35, 3605.27, 654.89, 654.81, 654.81, 654.81, 654.81, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    }

    energy_intensities_data = {
        "Solar": 0.00,
        "Wind": 0.00,
        "Hydro": 0.00,
        "Nuclear": 0.00,
        "Biomass": 44.64,
        "Natural Gas": 520.34,
        "Heavy Fuel Oil": 974.465,
        "Coal": 814.77
    }

    print(EI_elec_n_calc(energy_intensities_data, energy_sources_generation, 0))


if __name__ == "__main__":
    main()